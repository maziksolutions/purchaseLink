<main class="main" id="top">
<div class="container" data-layout="container">

<div class="content">
<nav class="navbar navbar-light navbar-glass navbar-top navbar-expand-lg pt-4" data-move-target="#navbarVerticalNav" data-navbar-top="combo">

<a class="navbar-brand me-1 me-sm-3" href="welcome" >
<div class="d-flex align-items-center"><img class="me-2" src="assets/img/AG-logo.png" alt="" width="180" />
</div>
</a>

<ul class="navbar-nav navbar-nav-icons ms-auto flex-row align-items-center">
<li class="nav-item">
Switch Theme
</li>
<li class="nav-item">
<div class="theme-control-toggle fa-icon-wait px-2">
<input class="form-check-input ms-0 theme-control-toggle-input" id="themeControlToggle" type="checkbox" data-theme-control="theme" value="dark" />
<label class="mb-0 theme-control-toggle-label theme-control-toggle-light" for="themeControlToggle" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Switch to light theme"><span class="fas fa-sun fs-0"></span></label>
<label class="mb-0 theme-control-toggle-label theme-control-toggle-dark" for="themeControlToggle" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Switch to dark theme"><span class="fas fa-moon fs-0"></span></label>
</div>
</li>
<li class="nav-item dropdown"><a class="nav-link pe-0" id="navbarDropdownUser" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
<div class="avatar avatar-xl" (mouseenter) ="mouseEnter('div a') ">
<img class="rounded-circle" src="assets/img/avatar.png" alt="" />

</div>

</a>


<div class="dropdown-menu dropdown-menu-end py-0" *ngIf="mouse_Enter" aria-labelledby="navbarDropdownUser">
<div class="bg-white dark__bg-1000 rounded-2 py-2" >
<a  class="dropdown-item">{{fullName}}<br><small>{{designation}}</small></a>
<div class="dropdown-divider" ></div>
<a class="dropdown-item" href="#changePassModal" data-bs-toggle="modal" aria-expanded="false">Change Password</a>
<div class="dropdown-divider" ></div>
<a class="dropdown-item" href="#userProfileModal" data-bs-toggle="modal" aria-expanded="false">Profile &amp; account</a>
<div class="dropdown-divider" ></div>
<a class="dropdown-item" href="#userFleetModal"  data-bs-toggle="modal" matTooltip="User Fleets" aria-expanded="false">Vessel Groups</a>
<div class="dropdown-divider" ></div>
<!-- <a class="dropdown-item" href="#openAlertSettings" data-bs-toggle="modal" aria-expanded="false">Alert/Notification Setting</a> -->

<!-- <div class="dropdown-divider" ></div> -->
<a class="dropdown-item" (click)="logout()">Logout</a>
</div>
</div>

</li>
</ul>
</nav>



<section class="text-center" style="border-radius: 0.375rem;">

<div class="container">
<div class="row">
<div class="col">
<h1 class="fs-2 fs-sm-4 fs-md-5 text-primary">Welcome to Atlantas Group</h1>
<p class="lead">Operations based in the UK, India, Togo and Nigeria. <br>Supervising a range of ships in dry bulk from handy size to panamax, and in tankers from smalls to MRs. <br>Aligning interests between owners and managers.</p>
</div>
</div>
<div class="row mt-6"  [ngClass]="{'hide': !PMS_View}">
<div class="col" >
<div class="card card-span h-100">
<a href="master/category">
<div class="card-span-img"><span class="fas fa-cogs fs-4 text-primary"></span></div>
<div class="card-body pt-6 pb-4 text-dark">
<h5 class="mb-2">PMS Link</h5>

</div>
</a>
</div>
</div>
<div class="col mt-6 mt-lg-0"  [ngClass]="{'hide': !QHSE_View}">
<div class="card card-span h-100">
<a href="javascript:void(0)">
<div class="card-span-img"><span class="fas fa-shield-alt fs-4 text-primary"></span></div>
<div class="card-body pt-6 pb-4">
<h5 class="mb-2">QHSE Link</h5>

</div>
</a>
</div>
</div>
<div class="col mt-6 mt-lg-0" [ngClass]="{'hide': !Purchase_View}">
<div class="card card-span h-100" >
<a href="javascript:void(0)">
<div class="card-span-img"><span class="fas fa-money-check-alt fs-4 text-primary"></span></div>
<div class="card-body pt-6 pb-4">
<h5 class="mb-2">Purchase Link</h5>

</div>
</a>
</div>
</div>
<div class="col mt-6 mt-lg-0" [ngClass]="{'hide': !Crewlink_View}">
<div class="card card-span h-100">
<a href="javascript:void(0)">
<div class="card-span-img"><img src="assets/img/crewlink.png" alt="" width="50" /></div>
<div class="card-body pt-6 pb-4">
<h5 class="mb-2">Crewlink</h5>

</div>
</a>
</div>
</div>
<div class="col mt-6 mt-lg-0" [ngClass]="{'hide': !Administration_View}">
<div class="card card-span h-100" >
<a href="administration">
<div class="card-span-img"><span class="fas fa-user-cog fs-4 text-primary"></span></div>
<div class="card-body pt-6 pb-4">
<h5 class="mb-2">Administration</h5>

</div>
</a>
</div>
</div>

<!-- <div class="col mt-6 mt-lg-0">
<div class="card card-span h-100">
<a href="/vesselManagement/vesselRegister">
<div class="card-span-img"><span class="fas fa-solid fa-ship fs-4 text-primary"></span></div>
<div class="card-body pt-6 pb-4">
<h5 class="mb-2">Vessels</h5>

</div>
</a>
</div>
</div> -->


</div>
</div>



<!-- end of .container-->
</section>



<footer class="footer">
<div class="row g-0 justify-content-between fs--1 mt-4 mb-3">
<div class="col-12 col-sm-auto text-center">
<p class="mb-0 text-600">Copyright Â© 2023, All rights reserved.</p>
</div>
</div>
</footer>
</div>
</div>
</main>



<div class="modal fade" id="userProfileModal" tabindex="-1" role="dialog" aria-labelledby="authentication-modal-label" aria-hidden="true">
<div class="modal-dialog modal-xl mt-6" role="document">
<div class="modal-content border-0">
<div class="modal-body py-4 px-5" style="background-color: aliceblue;">
<div class="app-content p-0 user-profile">
<div class="content-wrapper">
<section class="section team-section p-0">
<div class="row match-height">
<div class="col-md-4 mb-md-0 mb-5">
<!-- Card -->
<div class="card profile-card" style="margin-top: 60px">
<!-- Avatar -->
<div class="profile-avatar z-depth-1-half mb-4">
<img src="/assets/img/avatar.png" class="rounded-circle" alt="First sample avatar image">
</div>

<div class="card-body pt-0 mt-0">
<!-- Name -->
<div class="text-center">
<h3 class="mb-1 font-weight-bold proper-case" style="color: #233855;"><strong>{{fullName}}</strong></h3>
<h6 class="font-weight-bold blue-text mb-2">{{designation}}</h6>
<p><strong>Email :</strong> {{email}}</p>
<p style="color: #233855; font-weight: 600;">{{companyName}}</p>
</div>
</div>

</div>
</div>
<div class="col-md-8 mb-md-0 mb-5">
<div class="card m-t-60">
<div class="card-header">
<div class="row">
<div class="col-xl-6 col-lg-12">
  <h4 class="card-title p-t-5 proper-case">User Details</h4>
</div>
<!-- <div class="col-xl-6 col-lg-12">
  <div class="float-right">
    <button class="btn btn-primary form-small p-t-3 p-b-3 m-r-5" type="button" href="#changePassModal" data-bs-toggle="modal" aria-expanded="false"><i class="fas fa-edit" aria-hidden="true"></i> Change Password</button>
  </div>
</div> -->
</div>
</div>
<div class="card-content">
<div class="card-body pt-0">
<div class="table-responsive">
  <table class="table">
    <tbody>
      <tr>
        <th width="25%">Username</th>
        <td width="25%">{{userName}}</td>
        <th width="10%">DOB</th>
        <td width="40%">{{DOB| date:'dd-MMM-yyyy'}}</td>
        </tr>
        <tr>
          <th>User code</th>
          <td>{{userCode}}</td>
          <th>Mobile</th>
          <td> {{MobileNumber}}</td>
          </tr>
          <tr>
            <th>Date of Joining</th>
            <td>{{JoiningDate | date:'dd-MMM-yyyy'}}</td>
            <th>Address</th>
            <td>{{location}}</td>
            </tr>
    </tbody>
  </table>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</div>
</div>
</div>
</div>





<!-- <div class="modal-content border-0">
<div class="modal-body" style="font-weight: 400;">
<div class="form">
<div class="row">
<div class="col-md-12 mb-2">
<div class="form-group">
<label>User = {{fullName}}</label><br>
<label>Email = {{email}}</label><br>
<label>Company = {{companyName}}</label><br>
<label>User Name = {{userName}}</label><br>
<label>User Code = {{userCode}}</label><br>
<label>Join Date = {{JoiningDate}}</label><br>
<label>Date of Birth = {{DOB}}</label><br>
<label>Mobile Number = {{MobileNumber}}</label><br>
<label>Address= {{location}}</label><br>
</div>
</div>
</div>
</div>
</div>
</div> -->
</div>
</div>


<div class="modal fade" id="changePassModal" tabindex="-1" role="dialog" aria-labelledby="authentication-modal-label" aria-hidden="true">
<div class="modal-dialog modal-xl mt-6" role="document">  
<div class="modal-content border-0">        
<form [formGroup]="changePassForm"  (ngSubmit)="addHandler()">
<div class="modal-header">
<h5 class="modal-title" id="changePassLabel">Reset Password
<small class="font-small">All fields marked with * are required</small>
</h5>
</div>
<div class="modal-body" style="font-weight: 400;">
<div class="form">
<div class="row">
<div class="col-md-12 mb-2">
<div class="form-group">
<label>Old Password <span class="astrik">*</span></label>
<input type="password" class="form-control" formControlName="oldPass" [value]="fm.oldPass.value">
<!-- <span *ngIf="fm.oldPass.invalid && (fm.oldPass.dirty || fm.oldPass.touched)" class="error-msg">old
Password is required</span> -->
</div>
</div>
</div>


<div class="row">
<div class="col-md-12 mb-2">
<div class="form-group">
<label>New Password <span class="astrik">*</span></label>
<input type="password" class="form-control" formControlName="newpassword">    
<span *ngIf="fm.newpassword.errors?.required && (fm.newpassword.dirty || fm.newpassword.touched)"
class="error-msg">new password is required</span>
<span class="error-msg" *ngIf="fm.newpassword.errors?.pattern && (fm.newpassword.dirty || fm.newpassword.touched)">
Password must contain at least one number, one special character, one uppercase and a
lowercase letter and at least 8 characters<br />Password cannot
contain whitespace
</span>                 
</div>
</div>
</div>
<div class="row">
<div class="col-md-12 mb-2">
<div class="form-group">
<label>Confirm Password <span class="astrik">*</span></label>
<input type="password" class="form-control" (input)="comparePwd()" formControlName="confirmpassword"> 


<span class="error-msg" *ngIf="notMatched"> confirm password did not match
</span>
</div>

</div>
</div>
</div>
</div>
<div class="modal-footer " style="background:#F5F5F5;padding:0.5rem;">
<button type="button" class="btn btn-secondary" (click)="closeModal()" data-mdb-dismiss="modal">
Close
</button>
<button type="submit" class="btn btn-success"  [class.disabled]="changePassForm.invalid" 
>Save</button>
</div>
</form>
</div>
</div>
</div>



<div class="modal fade" id="openAlertSettings" tabindex="-1" role="dialog" aria-labelledby="authentication-modal-label" aria-hidden="true">
<div class="modal-dialog mt-6" role="document">  
<div class="modal-content border-0"> 
<div class="modal-header">
<h5 class="modal-title" id="changePassLabel">Alert/notification  configuration</h5>
</div>
<div class="modal-body" style="font-weight: 400; padding: 10 !important; font-size: 13px !important;">
<div class="form">
      <div class="table-responsive ">
          <table class="table table-hover font-small">
              <thead>
                  <tr style="background-color: #e2e2e2;">                     
                      <td class="th-sm">Alert type</td>
                      <td class="th-sm"><a href="javascript:void(0);" style="color: gray;" matTooltip="Alert">Alerts</a></td>
                      <td class="th-sm"><a href="javascript:void(0);" style="color: gray;" matTooltip="Notification">Notifications</a></td>                    
                    </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of settings">
                     
                          <td  style="text-align: left;">
                             {{item.alert?.alertName | titlecase}}</td>
                      <td>
                          <div><input type="checkbox" name="user" [value]="item.alertConfigId"
                              [checked]="item.alerts" (click)="saveAlert($event,'alert')"></div>
                        </td>
                          <td>
                          <div><input type="checkbox" [value]="item.alertConfigId"
                              [checked]="item.notification" (click)="saveAlert($event,'notification')"></div>
                        </td>                      
                       
                  </tr>
                </tbody>
          </table>
      </div>                   
</div>
</div>
<!-- <div class="modal-footer " style="background:#F5F5F5;padding:0.5rem;">
<button type="button" class="btn btn-secondary" (click)="closeAlert()" data-mdb-dismiss="modal">
Close
</button>
<button type="submit" class="btn btn-success" >Save</button>
</div> -->

</div>
</div>
</div>


<div class="modal fade" id="userFleetModal" tabindex="-1" role="dialog" aria-labelledby="authentication-modal-label"
  aria-hidden="true">
  <div class="modal-dialog modal-xl mt-6" role="document">
    <div class="modal-content border-0" >
      <form>
        <div class="modal-header">
          <h5 class="modal-title" id="changePassLabel">vessel Groups
          </h5>
          <div class="form-inline float-end" style="float: right;">
            <a class="accordion-btn collapsed px-2 m-r-5" type="button" data-bs-toggle="tooltip" (click)="clear()" matTooltip="Add"  data-bs-toggle="collapse"
            data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1"><i
              class="fas fa-plus text-primary"></i></a>
          </div>
        </div>

        <div class="card mb-3 bg-light">
          <div class="accordion-collapse collapse" id="collapse1" aria-labelledby="heading1" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <form (ngSubmit)="onSubmitUserFleet(userFleetForm)" [formGroup]="userFleetForm">
                <div class="row">
                  <div class="col-sm">
                    <fieldset class="form-group mb-0">
                      <input type="text" class="form-control form-small" required formControlName="fleetName" id="abc"
                        placeholder="Fleet Name" appUppercase maxlength="30" noWhiteSpace>
                    </fieldset>
                  </div>
                  <div class="col-sm">
                    <ng-multiselect-dropdown placeholder="Select Vessels" [(ngModel)]="selectedVessel" [data]="vesselss" [ngModelOptions]="{standalone: true}"
                    class="multiselect-dropdown" [settings]="dropdownVesselSetting" (onSelect)="onvesselSelect($event)"
                    (onSelectAll)="onVesselSelectAll($event)" (onDeSelect)="onVesselDeSelect($event)"
                    (onDeSelectAll)="onVesselDeSelectAll($event)"></ng-multiselect-dropdown>

                  </div>
                  <div class="col-md-2">
                    <button type="submit" class="btn btn-primary form-small m-r-5" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Save" aria-label=""  [disabled]="userFleetForm.invalid"><i
                            class="fas fa-save"></i></button>
                    <button type="button" class="btn btn-danger form-small m-r-5" data-bs-toggle="tooltip" (click)="close()" 
                        data-bs-placement="top" title="" data-bs-original-title="Cancel" aria-label=""><i
                            class="fas fa-ban"></i></button>
                </div>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="modal-body" style="font-weight: 400;">
          <div class="form">
            <div class="row">
              <div class="col-lg-12">
                  <div class="table-responsive scrollbar">
                    <mat-table #table [dataSource]="userFleetdataSource" matSort
                class="table table-hover table-striped table-sm small table-bordered">
                <ng-container matColumnDef="fleetName">
                  <mat-header-cell *matHeaderCellDef mat-sort-header>Vessel Group Name</mat-header-cell>
                  <mat-cell *matCellDef="let row">                       
                    <a  (click)="Updatedata(row.userFleetId)" class="accordion-btn show px-2 m-r-5" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1" *ngIf="row.fleetName!='Default Vessels'">{{row.fleetName}}</a>
                  <span *ngIf="row.fleetName=='Default Vessels'">{{row.fleetName}}</span>
                  </mat-cell>
              </ng-container>
              <ng-container matColumnDef="vessels">
                <mat-header-cell *matHeaderCellDef mat-sort-header>Vessel List</mat-header-cell>
                <mat-cell *matCellDef="let row" title={{getvessels(row.vessels)}}>                       
                   <span> {{getvessels(row.vessels)}}</span>
                
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
              </mat-table>
              <mat-paginator #paginator [length]="userFleetdataSource.filteredData.length" [pageIndex]="0" [pageSize]="20"
                [pageSizeOptions]="[20, 40, 60, 100]">
              </mat-paginator>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>